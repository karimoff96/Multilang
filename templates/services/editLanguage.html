{% extends '../layout/layout.html' %}
{% load i18n %}

{% block content %}
<div class="row gy-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <iconify-icon icon="mdi:pencil" class="me-2"></iconify-icon>
                    Edit Language: {{ language.name }}
                </h5>
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    
                    <!-- Basic Information -->
                    <div class="row g-4 mb-24">
                        <div class="col-12">
                            <h6 class="text-md fw-semibold mb-16 text-neutral-600">Basic Information</h6>
                        </div>
                        <div class="col-md-6">
                            <label for="name" class="form-label fw-semibold text-primary-light text-sm mb-8">
                                Language Name <span class="text-danger-600">*</span>
                            </label>
                            <input type="text" class="form-control radius-8" id="name" name="name" value="{{ language.name }}" required placeholder="e.g., English, French, Spanish">
                        </div>
                        <div class="col-md-6">
                            <label for="short_name" class="form-label fw-semibold text-primary-light text-sm mb-8">
                                Short Code <span class="text-danger-600">*</span>
                            </label>
                            <input type="text" class="form-control radius-8" id="short_name" name="short_name" value="{{ language.short_name }}" required placeholder="e.g., EN, FR, ES" maxlength="10" style="text-transform: uppercase;">
                            <small class="text-secondary-light">2-3 letter code</small>
                        </div>
                    </div>

                    <!-- Agency Pricing -->
                    <div class="row g-4 mb-24">
                        <div class="col-12">
                            <h6 class="text-md fw-semibold mb-16 text-primary-600">
                                <iconify-icon icon="mdi:briefcase" class="me-2"></iconify-icon>
                                Agency Pricing (UZS)
                            </h6>
                            <p class="text-sm text-secondary-light mb-12">Additional costs for agency/business customers</p>
                        </div>
                        <div class="col-md-4">
                            <label for="agency_page_price" class="form-label fw-semibold text-primary-light text-sm mb-8">
                                First Page Price
                            </label>
                            <input type="number" step="0.01" class="form-control radius-8" id="agency_page_price" name="agency_page_price" value="{{ language.agency_page_price }}" placeholder="0.00">
                            <small class="text-secondary-light">Additional cost for 1st page</small>
                        </div>
                        <div class="col-md-4">
                            <label for="agency_other_page_price" class="form-label fw-semibold text-primary-light text-sm mb-8">
                                Other Pages Price
                            </label>
                            <input type="number" step="0.01" class="form-control radius-8" id="agency_other_page_price" name="agency_other_page_price" value="{{ language.agency_other_page_price }}" placeholder="0.00">
                            <small class="text-secondary-light">Additional cost per other page</small>
                        </div>
                        <div class="col-md-4">
                            <label for="agency_copy_price" class="form-label fw-semibold text-primary-light text-sm mb-8">
                                Copy Price
                            </label>
                            <input type="number" step="0.01" class="form-control radius-8" id="agency_copy_price" name="agency_copy_price" value="{{ language.agency_copy_price }}" placeholder="0.00">
                            <small class="text-secondary-light">Additional cost per copy</small>
                        </div>
                    </div>

                    <!-- Ordinary User Pricing -->
                    <div class="row g-4 mb-24">
                        <div class="col-12">
                            <h6 class="text-md fw-semibold mb-16 text-success-600">
                                <iconify-icon icon="mdi:account" class="me-2"></iconify-icon>
                                Ordinary User Pricing (UZS)
                            </h6>
                            <p class="text-sm text-secondary-light mb-12">Additional costs for individual customers</p>
                        </div>
                        <div class="col-md-4">
                            <label for="ordinary_page_price" class="form-label fw-semibold text-primary-light text-sm mb-8">
                                First Page Price
                            </label>
                            <input type="number" step="0.01" class="form-control radius-8" id="ordinary_page_price" name="ordinary_page_price" value="{{ language.ordinary_page_price }}" placeholder="0.00">
                            <small class="text-secondary-light">Additional cost for 1st page</small>
                        </div>
                        <div class="col-md-4">
                            <label for="ordinary_other_page_price" class="form-label fw-semibold text-primary-light text-sm mb-8">
                                Other Pages Price
                            </label>
                            <input type="number" step="0.01" class="form-control radius-8" id="ordinary_other_page_price" name="ordinary_other_page_price" value="{{ language.ordinary_other_page_price }}" placeholder="0.00">
                            <small class="text-secondary-light">Additional cost per other page</small>
                        </div>
                        <div class="col-md-4">
                            <label for="ordinary_copy_price" class="form-label fw-semibold text-primary-light text-sm mb-8">
                                Copy Price
                            </label>
                            <input type="number" step="0.01" class="form-control radius-8" id="ordinary_copy_price" name="ordinary_copy_price" value="{{ language.ordinary_copy_price }}" placeholder="0.00">
                            <small class="text-secondary-light">Additional cost per copy</small>
                        </div>
                    </div>

                    <!-- Info Box -->
                    <div class="alert alert-info d-flex align-items-start mb-24">
                        <iconify-icon icon="mdi:information" class="text-info-600 me-12 mt-4" style="font-size: 24px;"></iconify-icon>
                        <div>
                            <strong>How Language Pricing Works:</strong>
                            <ul class="mb-0 mt-8">
                                <li>Language prices are <strong>added</strong> to product base prices</li>
                                <li>Set to 0 if there's no additional cost for this language</li>
                                <li>Final price = Product Price + Language Price</li>
                                <li>Example: If product 1st page = 50,000 and language 1st page = 10,000, customer pays 60,000 UZS</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="d-flex align-items-center justify-content-center gap-3">
                        <a href="{% url 'languageList' %}" class="border border-danger-600 bg-hover-danger-200 text-danger-600 text-md px-40 py-11 radius-8">
                            <iconify-icon icon="mdi:close" class="me-2"></iconify-icon>
                            Cancel
                        </a>
                        <button type="submit" class="btn btn-primary border border-primary-600 text-md px-40 py-12 radius-8 d-flex align-items-center gap-2">
                            <iconify-icon icon="mdi:content-save" class="text-xl line-height-1"></iconify-icon>
                            Update Language
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Auto-capitalize short name
    const shortNameInput = document.getElementById('short_name');
    shortNameInput.addEventListener('input', function() {
        this.value = this.value.toUpperCase();
    });
});
</script>
{% endblock content %}

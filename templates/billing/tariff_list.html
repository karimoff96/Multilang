{% extends "layout/layout.html" %}
{% load i18n %}

{% block title %}{% trans "Tariff Plans - Billing" %}{% endblock %}

{% block content %}
<div class="dashboard-main-body">
    <div class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-24">
        <h6 class="fw-semibold mb-0">{% trans "Tariff Plans" %}</h6>
        <ul class="d-flex align-items-center gap-2">
            <li class="fw-medium">
                <a href="{% url 'dashboard' %}" class="d-flex align-items-center gap-1 hover-text-primary">
                    <iconify-icon icon="solar:home-smile-angle-outline" class="icon text-lg"></iconify-icon>
                    {% trans "Dashboard" %}
                </a>
            </li>
            <li>-</li>
            <li class="fw-medium">{% trans "Tariffs" %}</li>
        </ul>
    </div>

    <div class="alert alert-info">
        <iconify-icon icon="solar:info-circle-bold" class="text-xl"></iconify-icon>
        {% trans "Tariff plans can be managed through the Django admin panel at" %} <a href="/admin/billing/tariff/" target="_blank">/admin/billing/tariff/</a>
    </div>

    <div class="row gy-4">
        {% for tariff in tariffs %}
        <div class="col-xxl-4 col-md-6">
            <div class="card h-100 border {% if tariff.is_active %}border-primary-600{% endif %}">
                <div class="card-body">
                    <h5 class="mb-4">{{ tariff.title }}</h5>
                    
                    <div class="mb-4">
                        <h6 class="text-secondary-light">{% trans "Limits" %}:</h6>
                        <ul class="list-unstyled">
                            <li><iconify-icon icon="solar:buildings-2-bold"></iconify-icon> {% trans "Branches" %}: 
                                {% if tariff.max_branches %}{{ tariff.max_branches }}{% else %}<span class="text-success-600">{% trans "Unlimited" %}</span>{% endif %}
                            </li>
                            <li><iconify-icon icon="solar:users-group-rounded-bold"></iconify-icon> {% trans "Staff" %}: 
                                {% if tariff.max_staff %}{{ tariff.max_staff }}{% else %}<span class="text-success-600">{% trans "Unlimited" %}</span>{% endif %}
                            </li>
                            <li><iconify-icon icon="solar:bag-4-bold"></iconify-icon> {% trans "Monthly Orders" %}: 
                                {% if tariff.max_monthly_orders %}{{ tariff.max_monthly_orders }}{% else %}<span class="text-success-600">{% trans "Unlimited" %}</span>{% endif %}
                            </li>
                        </ul>
                    </div>

                    <div class="mb-4">
                        <h6 class="text-secondary-light">{% trans "Features" %}:</h6>
                        <ul class="list-unstyled">
                            {% for feature in tariff.features.all %}
                            <li><iconify-icon icon="solar:check-circle-bold" class="text-success-600"></iconify-icon> {{ feature.name }}</li>
                            {% endfor %}
                        </ul>
                    </div>

                    <div>
                        <h6 class="text-secondary-light">{% trans "Pricing Options" %}:</h6>
                        {% for pricing in tariff.pricing.all %}
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span>{{ pricing.duration_months }} {% trans "month(s)" %}</span>
                            <span class="fw-semibold">{{ pricing.price|floatformat:0 }} {{ pricing.currency }}</span>
                        </div>
                        {% endfor %}
                    </div>

                    <div class="mt-4">
                        <a href="/admin/billing/tariff/{{ tariff.id }}/change/" class="btn btn-primary-600 w-100" target="_blank">
                            <iconify-icon icon="solar:pen-bold"></iconify-icon> {% trans "Edit in Admin" %}
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
